@{
    ViewData["Title"] = "Home";
    var student = User.ToAthenaUser();
}

@if (!User.Identity.IsAuthenticated)
{
    <div class="notLoggedIn" style="padding-top:5em">
        <h1>
            Welcome to the Athena Scheduling Assistant!
        </h1>
        <p class="flow-text" style="padding-bottom:5em">
            This tool was designed by students for students, to allow for a more streamlined approach to allow students to schedule their course work for each semester and allow them to track thier progression through their degree.
        </p>
        <div class="row center">
            <div class="col s4">
                <i class="large material-icons blue-text text-accent-3">person_add</i>

                <h4>Security</h4>
                <p>Uses your Google or Microsoft account for easy authentication. We provide a means of keeping your information safe by using the same authentication services as most universities.</p>
            </div>
            <div class="col s4">
                <i class="large material-icons blue-text text-accent-3">event_available</i>

                <h4>Scheduling & Things</h4>
                <p> Schedule the classes you need and view your week at a glance. Manage the classes you've taken and programs you're enrolled in. You can even see the progress of your program completion.</p>
            </div>
            <div class="col s4">
                <i class="large material-icons  blue-text text-accent-3">mood</i>

                <h4>Simplicity</h4>
                <p>Enjoy an easy to use and intuitive layout and functionality. We offer a solution to the many, MANY, overly complicated and numerous scheduling systems that universities already use.</p>
            </div>
        </div>
    </div>
}
else
{
    @Html.Partial("_StudentDetails")
}

@Html.Partial("_CurrentScheduleModal", false)
@Html.Partial("_UnmetDependencyError")

<div id="modal2" class="modal">
    <div class="modal-content">
        <h4>Confirm Removal</h4>
        <p>Please confirm that you would like to remove this class from your schedule.</p>
    </div>
    <div class="modal-footer">
        <a href="#!" class="modal-action modal-close waves-effect btn" id="Remove-Course-Button">Remove</a>
        <a href="#!" class="modal-action modal-close waves-effect btn">Cancel</a>
    </div>
</div>

@section scripts {
    @if (User.Identity.IsAuthenticated)
    {
        <script type="text/javascript" src="@Url.Content("~/schedule.js")"></script>
        <script type="text/javascript">
            function loadOtherPage(link) {
                $("<iframe class='printpage'>") // create a new iframe element
                    .attr("src", link) // point the iframe to the page link you want to print
                    .appendTo("body");
            }
            function ConfirmRemove(event) {
                $.ajax({
                    url: apiRoot + '/student/' + self.studentId + '/offerings/' + event.offeringId,
                    method: 'DELETE',
                    complete: reloadAll
                });
            }

            $(function () {
                athena.schedule.init('@(student.Id)', false);

                const removeBtn = $("#Remove-Course-Button");
                removeBtn.click(function () {
                    $.ajax({
                        url: apiRoot + '/student/@(student.Id)/offerings/' + removeBtn.attr('data-confirm-id'),
                        method: 'DELETE',
                        complete: athena.schedule.reloadAll
                    });
                });
                
            });
        </script>
    }
}